百万年薪程序员的生存指南

我个人认识一些非常有才华的开发人员，他们可以一帆风顺地创建极好的软件。正是这些天赋人士，使得外行人对我们这个行业充满了很高的期望。但我要说的一个可悲的事实是：并非每个人都是忍者/大师/明星开发者。

我就不是这些闪耀的新星，我只是一名平庸的开发者。如果你也不是天才玩家，那么本文将指导你如何在这个行业中生存下去。

## 最简单的事情—只要google一下

我记不了很多东西。像标准库中的函数和方法、参数位置、软件包名称，样板代码等等，都在我脑容量之外。

所以，我必须使用google搜索。我每天都这样做。我也一直在重复使用旧项目的代码。有时我甚至从StackOverflow或Github复制粘贴答案。是的，我的开发其实可称之为：StackOverflow驱动开发。

但我并不孤单。许多其他开发人员也这样做。有一个受众面很广的twitter讨论就是由Ruby on Rails的创建者所启动的。

那么，为什么一开始会认为这种行径是不好的呢？因为它有若干缺点：

- 会导致你复制到糟糕的设计决策或易受其他人攻击的代码
- 会形成一种依赖心态：要是我们不能google到内容，那么只能向人求助了
- 没有网就不能工作

但是，我不认为这些是大问题。它甚至可以作为是你的秘密武器。我有一些建议可用于减少其负面影响。

生存指南：

- 使用IDE来获得自动完成和建议，所以你不必google编程语言的基础内容；
- 记住你曾解决过这个问题的地方（而不是如何解决的）。这样你便可以随时在那里找到解决方案；
- 所有粘贴到项目中的代码你稍后都应该进行分析、重构和审查。这样我们在快速提供解决方案的同时也不会损坏项目。

### 一切保持简单明了

我们说什么，机器就做什么。即便是错的，它们也毫不迟疑。所以，软件开发中的主要问题不是机器，在于开发人员的心智能力。而这玩意提升的空间是非常有限的。所以，我们——作为平庸的开发人员——不能将有限的脑力浪费在创建复杂的抽象、模糊算法或不可读的长代码块上。你需要保持一切简单明了。

但是，我们怎么判定代码是简单还是复杂？我们使用WTFs / Minute方法来衡量代码质量。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/z1ViaEyjXTiatBHQumIPgWfEtfaibjLFU6zzRRlyqfXDLLia5mRJvq62cO1Dib6KvPiceQuHJZ3ibFGiahianvAeFTuCbdg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

这个原则很容易理解。每当你在代码中发现一些你不明白的东西时——哦，这太复杂了。怎么做呢？

- 重写，使设计更干净
- 提供文档
- 给最棘手的部分添加注释。但请记住，注释应该描述的是代码本身

如何从头开始保持简单明了：

- 对变量、函数和类使用正确的名称
- 确保程序的每个部分只做一件事
- 纯函数优于正则函数
- 正则函数优于类
- 仅在强烈需求的情况下使用类

### 不自信的我

一些开发人员会证明自己可以提供高质量的代码。请看图中的这位女士：阿波罗登月计划的首席软件工程师Margaret Hamilton。那几乎有她人那么高的是什么呢？好吧，那正是她为登月任务编写的代码：

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/z1ViaEyjXTiatBHQumIPgWfEtfaibjLFU6zUg3Pxb01HLLGcTrtk1WF4Veia2bCz5n33ibpgbJJVYMnk1b7P33ibIDmg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

但是，每当我编写任何代码时——我都不自信。即使是项目最简单的部分，我也可以把事情搞得一塌糊涂。搞糟的原因包括：

- 语言错误
- 逻辑错误
- 设计错误
- 样式错误
- 安全错误
- WTF错误（我向来最为喜欢的！）

关于“学习如何编写没有bug的代码”的魔法书是不存在的。因为所有软件都有bug——除了这个框架之外。遇到bug我们就应该处理掉。

关键要点是：每个人编写的代码都不应该带有明显的错误。对的，至少，我们应该朝着这个目标去做。但是我是如何保护我的项目免受我的摧残呢？方法很多。

生存指南：

- 编写测试。编写很多测试。从集成测试到单元测试。在每次pull请求前在CI中运行测试。这可以避免一些逻辑错误；
- 使用静态类型或可选的静态类型。例如，我们在python中使用mypy，在javascript中使用flow。积极作用：更清洁的设计和“编译时”检查；
- 使用自动样式检查。每种语言都有很多样式检查器；
- 使用质量检查。有些工具在你的代码库上运行一些复杂的启发式算法来检测不同的问题，比如这个代码行内有太多的逻辑，这个类是不需要的，这个函数太复杂了；
- 审查你的代码。在合并为master之前对其进行审查。以及合并后的某个时间也是如此；
- 付钱让其他人来审核你的代码。此手段可以产生巨大的积极影响！因为如果是陌生的开发人员来查看你的代码，他们更容易发现不一致和糟糕的设计决策。

### 不仅适用于我

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/z1ViaEyjXTiatBHQumIPgWfEtfaibjLFU6zWicLavVJ1vZxPDUUCMibTxDwqOwRP0N0W1kSVJOXa75QNMEkGQ4cXZzQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

大约十年前，在我的团队开发出我们的第一个大型软件项目时，我们将其作为java源文件发布。然而，它无法在目标服务器上编译。这距离需要提交给客户只有若干小时了。这是一个巨大的失败！最后我们用尽办法终于能够启动并运行了，但不可否认这真的是一次刻骨铭心的体验。

发生这种情况是因为构建管道中存在众多配置和复杂性。而我们无法妥善管理这个系统的复杂性。所以，从那一天起，为了减少这种复杂性，我尝试在隔离的环境中打包我的程序。并且在实际部署发生之前在这个环境中测试它们。

在docker（通常还有容器）崛起的近几年，事情变得简单起来。docker允许你在相同的隔离环境中运行开发、测试和生产。所以，你永远不会错过任何重要的事情。

那么你会怎么做？说说我自己，我在创建服务器、初始配置或连接的时候总是会忘记一些事情。因为有这么多需要记住的事情！幸运的是，这些我们都可以自动化。有很多不同的工具可以自动化部署过程，这些工具厉害极了，如：terraform，ansible和packer。阅读工具信息，找出实际需要哪一个用于任务。

我也尝试尽快建立CI / CD。这样，如果我的构建在测试或部署中失败，那么就会有报告发我。

生存指南：

- 自动化用于部署的任何内容；
- 使用docker进行应用程序开发、测试和部署；
- 使用部署工具。

### 应用程序部署后，我仍然不自信

终于，我的应用程序已经进入了产品阶段。它可以工作了。我可以休息休息，应该不会出什么问题了。等等，不！一切都崩溃了。是的，我没有说错：一切。

实际上，有一些工具可以使得查找和解决现有问题更加容易。

- Sentry。当你的任何用户发生错误时——你将收到通知。几乎绑定了所有编程语言；
- 使用不同的服务和工具将多个进程和服务器的日志收集到一个地方；
- 服务器监控。这是你可以为CPU，磁盘，网络和内存配置显示器的地方。你甚至可以在用户实际破坏你的服务之前发现需要增加的时间

简而言之，我们需要监控生产中的应用。我们有时使用所有这些工具，有时只使用最需要的部分。

### 学无止境

需要学习的东西是无穷的。如果我们想编写出好的软件，那么我们需要不断地学习怎么做。没有捷径也没有魔法。每天进步一点点，就会越来越好。

总之，我们需要理解两件基本的事情：

- 每个人都会遇到问题。关键是我们得对这些问题做好准备；
- 我们可以将问题的源头控制到一些可接受的水平。

这些与你的心智能力或心态无关。